<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>App.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="Accreditation.html">Accreditation</a></li><li></li><li><a href="Header.html">Header</a></li><li></li><li><a href="Main.html">Main</a></li><li></li><li><a href="Manufacturer.html">Manufacturer</a></li><li></li><li><a href="Pathogen.html">Pathogen</a></li><li></li><li><a href="Sidebar.html">Sidebar</a></li><li></li><li><a href="TopBar.html">TopBar</a></li><li></li><li><a href="Vaccine.html">Vaccine</a></li><li></li><li><a href="VaccineListTable.html">VaccineListTable</a></li><li></li></ul><h3>Global</h3><ul><li><a href="global.html#App">App</a></li><li><a href="global.html#filterLists">filterLists</a></li><li><a href="global.html#filterManufacturers">filterManufacturers</a></li><li><a href="global.html#filterPathogens">filterPathogens</a></li><li><a href="global.html#filterVaccines">filterVaccines</a></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">App.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useState, useEffect } from 'react';
import './App.scss';
import './assets/animations/animations.css';

import Header from './components/Header';
import Sidebar from './components/Sidebar';
import InformationView from './components/InformationView.js';
import TopBar from './components/TopBar.js';

import manufacturers from './assets/data/manufacturers.json';
import pathogens from './assets/data/pathogens.json';
import vaccines from './assets/data/vaccines.json';
import scientificNames from './assets/scientificNames';

/**
 * Main application component for the vaccine profile page.
 *
 * @component
 *
 * @description 
 * This is the main component of the vaccine profile application. It manages the state of selected items, 
 * handles user interactions, and renders the Header, Sidebar, InformationView, and other components. It 
 * is the entry point into the application.
 *
 * @returns {JSX.Element} The main application component containing all sub-components and logic.
 *
 * @example
 * // Example usage of App component
 * &lt;App />
 */

const App = () => {
    const [activeTab, setActiveTab] = useState('Manufacturer');
    const [activeFilters, setActiveFilters] = useState({
        firstAlphabet: '',
        searchKeyword: ''
    })
    const [ selectedPathogen, setSelectedPathogen ] = useState({});
    const [ selectedVaccine, setSelectedVaccine ] = useState({});
    const [ selectedManufacturer, setSelectedManufacturer ] = useState({});
    const [ selectedAccreditation, setSelectedAccreditation ] = useState("")
    const [ sidebarList, setSidebarList ] = useState();
    const [ pathogensList, setPathogensList ] = useState();
    const [ vaccinesList, setVaccinesList ] = useState();
    const [ manufacturersList, setManufacturersList ] = useState(manufacturers);
    const [ changedFrom, setChangedFrom ] = useState('');

    /**
     * Handles the search input change.
     *
     * @param {string} tab - The selected tab type can be "Manufacturers", "Pathogens" or "Products".
     */
    
    const handleTabChange = tab => {
        setActiveTab(tab);
    };

    /**
     * Handles the search input change.
     *
     * @param {string} keyword - The search keyword.
     */

    const handleSearch = keyword => {
        setActiveFilters({...activeFilters, 
            searchKeyword: keyword
        })
    };

    /**
     * Handles selecting a pathogen.
     *
     * @param {object} pathogen - The selected pathogen object.
     */

    const handleSelectPathogen = pathogen => {
        const vaccine = vaccines.find(vaccine => vaccine.vaccineId === pathogen.vaccines[0].vaccineId);
        setSelectedVaccine(vaccine);
        setSelectedPathogen(pathogen);
        setActiveTab("Pathogen");
        setActiveFilters({...activeFilters, firstAlphabet: ''});
    };

    /**
     * Handles selecting a vaccine.
     *
     * @param {object} vx - The selected vaccine object.
     */

    const handleSelectVaccine = vx => {
        const vaccine = vaccines.find(vaccine => vaccine.name === vx.name);
        setSelectedVaccine(vaccine);
        setActiveTab("Vaccine");
    };

    /**
     * Handles selecting a manufacturer.
     *
     * @param {object} manufacturer - The selected manufacturer object.
     */

    const handleSelectManufacturer = manufacturer => {
        setSelectedManufacturer(manufacturer);
        setActiveTab("Manufacturer");
    };

    /**
     * Handles selecting an accreditation.
     *
     * @param {string} accreditation - The selected accreditation.
     */

    const handleSelectAccreditation = accreditation => {
        setSelectedAccreditation(accreditation);
        setActiveTab("Accreditation");
    }

    /**
     * Retrieves the pathogen associated with a vaccine.
     *
     * @param {object} vaccine - The vaccine object.
     * @returns {object} The pathogen object.
     */

    const getPathogenByVaccine = vaccine => {
        return pathogens.find(pathogen => pathogen.pathogenId === vaccine.pathogenId);
    };

    /**
     * Retrieves vaccines by accreditation.
     *
     * @returns {Array} List of vaccines with the selected accreditation.
     */

    const getVaccinesByAccreditation = () => {
        return vaccines.filter(vaccine => vaccine.accreditation.includes(selectedAccreditation));
    }

    /**
     * Retrieves vaccines by manufacturer.
     *
     * @param {Object} [manufacturer=selectedManufacturer] - The manufacturer object to filter vaccines by. Defaults to `selectedManufacturer` if not provided.
     * @returns {Array} List of vaccines from the selected manufacturer.
     */

    const getVaccinesByManufacturer = (manufacturer = selectedManufacturer) => {
        return vaccines.filter(vaccine => vaccine.manufacturerId === manufacturer.manufacturerId);
    };

    /**
     * Retrieves vaccines by pathogen.
     *
     * @param {Object} pathogen - The pathogen object.
     * @returns {Array} List of vaccines associated with the given pathogen.
     */
    
    const getVaccineByPathogen = pathogen => {
        return vaccines.filter(vaccine => vaccine.pathogenId === pathogen.pathogenId);
    };

    /**
     * Retrieves manufacturers by vaccine.
     *
     * @param {Object} vaccine - The vaccine object.
     * @returns {Array} List of manufacturers associated with the given vaccine.
     */

    const getManufacturerByVaccine = vaccine => {
        return manufacturers.filter(manufacturer => manufacturer.manufacturerId === vaccine.manufacturerId);
    };

    /**
     * Filters the list of manufacturers based on the search keyword.
     * 
     * This function filters manufacturers and also checks related vaccines and pathogens for matches with the search keyword.
     * 
     * @function
     * @name filterManufacturers
     * 
     * @param {string} keywordLower - The lowercased search keyword used for filtering.
     * @returns {Array} - An array of filtered manufacturers.
     */
    const filterManufacturersBySearch = (keyword) => {
        return manufacturersList.filter(manufacturer => {
            const matchesKeyword = manufacturer.name.toLowerCase().includes(keyword) ||
                                    manufacturer.description.toLowerCase().includes(keyword);
            if (matchesKeyword) return true;
            
            const vaccines = getVaccinesByManufacturer(manufacturer) || [];
            return vaccines.some(vaccine => {
                const vaccineMatch = vaccine.name.toLowerCase().includes(keyword) ||
                                    vaccine.description.toLowerCase().includes(keyword);
                
                if (vaccineMatch) return true;
                
                const pathogens = getPathogenByVaccine(vaccine) || [];
                return Array.isArray(pathogens) &amp;&amp; pathogens.some(pathogen =>
                    pathogen.name.toLowerCase().includes(keyword) ||
                    pathogen.description.toLowerCase().includes(keyword)
                );
            });
        });
    };

    /**
     * Filters the list of vaccines based on the search keyword.
     * 
     * This function filters vaccines and also checks related pathogens and manufacturers for matches with the search keyword.
     * 
     * @function
     * @name filterVaccines
     * 
     * @param {string} keyword - The lowercased search keyword used for filtering.
     * @returns {Array} - An array of filtered vaccines.
     */
    const filterVaccinesBySearch = (keyword) => {
        return vaccinesList.filter(vaccine => {
            const vaccineMatch = vaccine.name.toLowerCase().includes(keyword) ||
                                 vaccine.description.toLowerCase().includes(keyword);
            if (vaccineMatch) return true;
            const pathogens = getPathogenByVaccine(vaccine) || [];
            const pathogenMatch = Array.isArray(pathogens) &amp;&amp; pathogens.some(pathogen =>
                pathogen.name.toLowerCase().includes(keyword) ||
                pathogen.description.toLowerCase().includes(keyword)
            );
            const manufacturersMatch = getManufacturerByVaccine(vaccine).some(manufacturer =>
                manufacturer.name.toLowerCase().includes(keyword) ||
                manufacturer.description.toLowerCase().includes(keyword)
            );
            return pathogenMatch || manufacturersMatch;
        });
    };

    /**
     * Filters the list of pathogens based on the search keyword.
     * 
     * This function filters pathogens and also checks related vaccines and manufacturers for matches with the search keyword.
     * 
     * @function
     * @name filterPathogens
     * 
     * @param {string} keyword - The lowercased search keyword used for filtering.
     * @returns {Array} - An array of filtered pathogens.
     */
    const filterPathogensBySearch = (keyword) => {
        return pathogensList.filter(pathogen => {
            const pathogenMatch = pathogen.name.toLowerCase().includes(keyword) ||
                                pathogen.description.toLowerCase().includes(keyword);
            
            if (pathogenMatch) return true;
            
            const vaccines = getVaccineByPathogen(pathogen) || [];
            return Array.isArray(vaccines) &amp;&amp; vaccines.some(vaccine => {
                const vaccineMatch = vaccine.name.toLowerCase().includes(keyword) ||
                                    vaccine.description.toLowerCase().includes(keyword);
                
                if (vaccineMatch) return true;
                
                return getManufacturerByVaccine(vaccine).some(manufacturer =>
                    manufacturer.name.toLowerCase().includes(keyword) ||
                    manufacturer.description.toLowerCase().includes(keyword)
                );
            });
        });
    };

    /**
     * Filters the sidebar list based on the currently selected tab and search keyword.
     * 
     * This function determines which filtering function to use based on the active tab and updates the `sidebarList` state
     * with the filtered list of items that match the search criteria.
     * 
     * @function
     * @name filterLists
     * 
     * @returns {void} This function does not return a value. It updates the `sidebarList` state directly.
     */
    const filterListsBySearch = () => {
        let filteredSidebarList = [];
        
        if (activeFilters.searchKeyword) {
            const keywordLower = activeFilters.searchKeyword.toLowerCase()
            
            if (activeTab === 'Manufacturer') {
                filteredSidebarList = filterManufacturersBySearch(keywordLower);
            } else if (activeTab === 'Product') {
                filteredSidebarList = filterVaccinesBySearch(keywordLower);
            } else if (activeTab === 'Pathogen') {
                filteredSidebarList = filterPathogensBySearch(keywordLower);
            }
            setSidebarList(filteredSidebarList);
        } else {
            if (activeTab === 'Manufacturer') {
                setSidebarList(manufacturersList);
            } else if (activeTab === 'Product') {
                setSidebarList(vaccinesList);
            } else if (activeTab === 'Pathogen') {
                setSidebarList(pathogensList);
            }
        }

        // if (activeFilters.firstAlphabet) {
        //     filteredSidebarList = filteredSidebarList.filter(item =>
        //         item.name.startsWith(activeFilters.firstAlphabet)
        //     );
        // }
    };

    /**
     * Converts camel case strings to readable format.
     *
     * @param {string} string - The camel case string.
     * @returns {string} The readable string.
     */

    const convertCamelCaseToReadable = string => {
        return string==="ceo" ? "CEO" : string.replace(/([A-Z])/g, ' $1')
    };

    /**
     * Italizes scientific names in a given text.
     *
     * @param {string} text - The text containing scientific names.
     * @returns {JSX.Element} The text with scientific names italicized.
     */

    const italizeScientificNames = text => {
        const parts = text.split(new RegExp(`(${scientificNames.join('|')})`, 'gi'));
    
        return (
            &lt;span>
                {parts.map((part, index) => {
                    const isScientificName = part &amp;&amp; scientificNames.some(name => name.toLowerCase() === part.toLowerCase());
                    return isScientificName ? (
                        &lt;i key={index}>{part}&lt;/i>
                    ) : (
                        part
                    );
                })}
            &lt;/span>
        );
    };

    useEffect(()=>{
        setManufacturersList(manufacturers);
        setPathogensList(pathogens);
        setVaccinesList(vaccines);
    },[])

    useEffect(()=>{
        filterListsBySearch();
    },[activeTab, pathogensList, vaccinesList, manufacturersList])

    useEffect(() => {
        filterListsBySearch();
    }, [activeFilters]);
    
    return (
        &lt;div className='vacciprofile-page'>
            &lt;div className='container'>
                &lt;Header/>
                &lt;TopBar
                    activeTab={activeTab}
                    handleTabChange={handleTabChange}
                    handleSearch={handleSearch}
                />
                &lt;div className='row py-4'>
                    &lt;Sidebar
                        activeTab={activeTab}
                        sidebarList={sidebarList}
                        selectedManufacturer={selectedManufacturer}
                        setSelectedManufacturer={setSelectedManufacturer}
                        handleSelectManufacturer={handleSelectManufacturer}
                        setChangedFrom={setChangedFrom}
                        changedFrom={changedFrom}
                        setActiveTab={setActiveTab}
                    />
                    &lt;InformationView
                        activeTab={activeTab}
                        activeFilters={activeFilters}
                        setActiveFilters={setActiveFilters}
                        manufacturersList={manufacturersList}
                        selectedPathogen={selectedPathogen}
                        selectedVaccine={selectedVaccine}
                        selectedManufacturer={selectedManufacturer}
                        selectedAccreditation={selectedAccreditation}
                        handleSelectPathogen={handleSelectPathogen}
                        handleSelectVaccine={handleSelectVaccine}
                        handleSelectManufacturer={handleSelectManufacturer}
                        handleSelectAccreditation={handleSelectAccreditation}
                        getPathogenByVaccine={getPathogenByVaccine}
                        getVaccinesByManufacturer={getVaccinesByManufacturer}
                        getVaccinesByAccreditation={getVaccinesByAccreditation}
                        italizeScientificNames={italizeScientificNames}
                        convertCamelCaseToReadable={convertCamelCaseToReadable}
                        changedFrom={changedFrom}
                    />
                    {/* &lt;AlphabetsNavigation 
                        activeFilters={activeFilters} 
                        setActiveFilters={setActiveFilters}
                        setSelectedManufacturer={setSelectedManufacturer}
                    /> */}
                &lt;/div>
            &lt;/div>
        &lt;/div>
    );
};

export default App;
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.3</a> on Tue Aug 06 2024 00:12:31 GMT+0800 (Singapore Standard Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
